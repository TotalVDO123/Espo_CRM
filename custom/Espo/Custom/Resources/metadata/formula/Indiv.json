{
    "beforeSaveCustomScript": "//forwarding\nbranchName = hall.branchName;\n\n$typeNames = array\\push($typeNames, 'Індив', 'Дует', 'Трио');\n$clientCount = array\\length(contactsIds);\n\nname = string\\concatenate(hall.number,  '/ ', array\\at($typeNames, $clientCount - 1));\n\n//default price calculation\n$categoryId = record\\attribute(\"User\", assignedUserId, 'trainerCategoryId');\n$categoryIndivId = record\\findOne('CategoryIndivPrice', 'createdAt', 'desc', \"trainerCategoryId=\", $categoryId, \"clientCount=\", $clientCount);\n$indivPrice = record\\attribute(\"CategoryIndivPrice\", $categoryIndivId, 'price');\n$indivPercent = record\\attribute(\"CategoryIndivPrice\", $categoryIndivId, 'percent');\n\ndefaultPrice = $indivPrice;\ndefaultPercent = 100 - $indivPercent;"
}